'use client'

import { useEffect, useState } from 'react'
import clsx from 'clsx'
import Link from 'next/link'

import { useScrollPosition } from '@/lib/scroll'
import styles from '@/styles/components/global/header.module.css'
import utils from '@/styles/utils.module.css'

export interface Props {
  home?: boolean
}

const Progress = () => {
  return null
  const { percentage: scrollPercentage } = useScrollPosition({ windowScroll: true })
  return <div className={styles.progress} style={{ width: `${scrollPercentage.vertical}%` }} />
}

export default function Header({ home }: Props) {
  const [mounted, setMounted] = useState(false)

  const { position: scrollPos } = useScrollPosition({ windowScroll: true })

  // Wait until after client-side hydration to show progress
  useEffect(() => {
    setMounted(true)
  }, [])

  return (
    <header className={styles.header}>
      <Link href="/">
        {(mounted && <Progress />) || null}
        <h1>
          <span className={utils.srOnly}>Mike Farrow</span>
          <svg
            className={clsx(
              styles.logo,
              home ? styles.logoHome : scrollPos.vertical > 100 && styles.logoCollapse
            )}
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            xmlnsXlink="http://www.w3.org/1999/xlink"
            xmlSpace="preserve"
            x="0px"
            y="0px"
            viewBox="0 0 302.5 66.3"
            // viewBox="0 0 812.8 188.4"
          >
            {/* <polygon
              className="st0"
              points="77.6,63.3 26.9,63.3 26.9,32.3 85.4,32.3 85.4,6.3 0,6.3 0,142.9 26.9,142.9 26.9,89.3 77.6,89.3 	"
            />
            <path
              className="st0"
              d="M337.4,84.3c3.8-4.6,6.5-9.7,8.2-15.2c1.7-5.6,2.5-11.1,2.5-16.7c0-7.1-1.2-13.4-3.5-19
		c-2.4-5.6-5.8-10.5-10.3-14.5c-4.5-4-10.1-7.1-16.8-9.3c-6.7-2.2-14.3-3.2-22.8-3.2h-41.4v136.6h26.9V99.5H298l28.9,43.4h31.4
		l-31.8-49.6C330.8,90.8,334.4,87.8,337.4,84.3z M280.1,32.3h19.3c4.7,0,8.4,0.8,11.2,2.4c2.8,1.6,4.9,3.6,6.2,5.9
		c1.4,2.4,2.3,4.7,2.7,7c0.4,2.3,0.6,4.2,0.6,5.7c0,2-0.3,4.1-1,6.4c-0.7,2.3-1.8,4.5-3.3,6.6c-1.5,2.1-3.7,3.8-6.4,5.2
		c-2.7,1.4-6.1,2-10.2,2h-19.1V32.3z"
            />
            <path
              className="st0"
              d="M464.7,84.3c3.8-4.6,6.5-9.7,8.2-15.2c1.7-5.6,2.5-11.1,2.5-16.7c0-7.1-1.2-13.4-3.5-19
		c-2.4-5.6-5.8-10.5-10.3-14.5c-4.5-4-10.1-7.1-16.8-9.3c-6.7-2.2-14.3-3.2-22.8-3.2h-41.4v136.6h26.9V99.5h17.9l28.9,43.4h31.4
		l-31.8-49.6C458.1,90.8,461.8,87.8,464.7,84.3z M407.4,32.3h19.3c4.7,0,8.4,0.8,11.2,2.4c2.8,1.6,4.9,3.6,6.2,5.9
		c1.4,2.4,2.3,4.7,2.7,7c0.4,2.3,0.6,4.2,0.6,5.7c0,2-0.3,4.1-1,6.4c-0.7,2.3-1.8,4.5-3.3,6.6c-1.5,2.1-3.7,3.8-6.4,5.2
		c-2.7,1.4-6.1,2-10.2,2h-19.1V32.3z"
            />
            <polygon
              className="st0"
              points="812.8,7.2 783.8,7.2 760.7,83.1 730,7.2 703.3,7.2 714.1,34.2 693.2,86.2 666.4,7.2 634.8,7.2 
		689.7,149.2 727.6,67.9 760.1,148.9 	"
            />
            <path
              className="st0"
              d="M73.9,142.9h165L156.4,0L73.9,142.9z M118.8,117l37.6-65.1L194,117H118.8z"
            />
            <path
              className="st0"
              d="M562.4,4.8c-38.6,0-69.8,31.3-69.8,69.8s31.3,69.8,69.8,69.8s69.8-31.3,69.8-69.8S601,4.8,562.4,4.8z
		 M562.4,118.5c-24.2,0-43.9-19.7-43.9-43.9c0-24.2,19.7-43.9,43.9-43.9c24.2,0,43.9,19.7,43.9,43.9
		C606.3,98.8,586.6,118.5,562.4,118.5z"
            />
            <rect x="510.3" y="162.5" className="st0" width="104.2" height="25.9" /> */}
            <polygon
              points="8.3,1.4 0,1.4 0,51.1 9.7,51.1 9.7,30.4 28.2,30.3 28.2,22.2 9.7,22.2 9.7,9.6 29.1,9.6 29.1,1.4 
	9.7,1.4 "
            />
            <path
              d="M118.8,32.7c2.9-1.2,5.2-2.9,6.8-5.3c1.6-2.4,2.4-5.4,2.4-9v-1.1c0-3.6-0.8-6.6-2.4-9c-1.6-2.4-3.8-4.2-6.8-5.4
	s-6.4-1.8-10.4-1.8h-8.8h-2.9H90v50h9.7V34.5h8.8c0.1,0,0.1,0,0.2,0l11.7,16.6h11.3l-13.2-18.2C118.5,32.8,118.6,32.8,118.8,32.7z
	 M99.7,9.3h9.8c1.8,0,3.3,0.4,4.6,1.1c1.3,0.7,2.3,1.7,3,3.1c0.7,1.3,1.1,2.8,1.1,4.6c0,1.7-0.4,3.2-1.1,4.5c-0.7,1.3-1.7,2.3-3,3.1
	c-1.3,0.7-2.8,1.1-4.6,1.1h-9.8V9.3z"
            />
            <path
              d="M164.7,32.7c2.9-1.2,5.2-2.9,6.8-5.3c1.6-2.4,2.4-5.4,2.4-9v-1.1c0-3.6-0.8-6.6-2.4-9c-1.6-2.4-3.8-4.2-6.8-5.4
	s-6.4-1.8-10.4-1.8h-8.8h-2.9H136v50h9.7V34.5h8.8c0.1,0,0.1,0,0.2,0l11.7,16.6h11.3l-13.2-18.2C164.5,32.8,164.6,32.8,164.7,32.7z
	 M145.6,9.3h9.8c1.8,0,3.3,0.4,4.6,1.1c1.3,0.7,2.3,1.7,3,3.1c0.7,1.3,1.1,2.8,1.1,4.6c0,1.7-0.4,3.2-1.1,4.5
	c-0.7,1.3-1.7,2.3-3,3.1c-1.3,0.7-2.8,1.1-4.6,1.1h-9.8V9.3z"
            />
            <polygon
              points="293,1.4 284.3,43 282.5,43 273.5,3.3 271.3,3.3 264.9,3.3 263,3.3 255.2,43 253.4,43 243.5,1.4 
	233.5,1.4 246.2,51.1 261.3,51.1 268.2,18 275.8,51.1 291.2,51.1 302.5,1.4 "
            />
            <g>
              <g>
                <path
                  d="M205.9,8.4c9.5,0,17.2,8,17.2,17.7s-7.7,17.7-17.2,17.7s-17.2-8-17.2-17.7S196.4,8.4,205.9,8.4 M205.9,0
			c-14.5,0-26.2,11.7-26.2,26.2s11.7,26.2,26.2,26.2s26.2-11.7,26.2-26.2S220.3,0,205.9,0L205.9,0z"
                />
                <rect x="187.3" y="58.3" width="37.1" height="8" />
              </g>
            </g>
            <path d="M56.3,18.4l13.9,24.1H42.4L56.3,18.4 M56.3,0.4L26.8,51.5h59L56.3,0.4L56.3,0.4z" />
          </svg>
        </h1>
      </Link>
      {/* <ul>
        <li>
          <Link href="/cv">CV</Link>
        </li>
        <li>
          <Link href="/projects">Projects</Link>
        </li>
      </ul> */}
    </header>
  )
}
